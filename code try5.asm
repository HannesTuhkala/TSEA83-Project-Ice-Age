const pcr 64
CONST pcd 65
const joy 66 
CONST CT 69
CONST DIR 4 
CONST TEMP 0 
CONST DEL_TIME 32
CONST DEL1 1
CONST DEL2 2
CONST DEL3 3
CONST STARTPOS 234 
start:
	MOVE STARTPOS PCR
L1: 
	cmp joy IMED 0 
	add joy IMED 0 DIR 
	NOP 
	BRF L1 Z 
	NOP
	CMP DIR IMED 7 
	NOP 
	BRF UP Z 
	CMP DIR IMED 6 
	NOP 
	BRF DOWN Z 
	CMP DIR IMED 5 
	NOP 
	BRF RIGHT Z 
	NOP 
	CMP DIR IMED 4
	NOP
	BRF LEFT Z
	NOP
	BRA START
	NOP 
UP: 	 
	SUB PCR IMED 16 PCR
	NOP
	NOP
	NOP
	CMP CT IMED 1
	NOP
	BRF UP2 Z
	NOP
	MOVE 240 PCD
USTEP:
	BRA DEL
USTEP.1:
	SUB PCD IMED 16 PCD
	NOP
	BRF UC Z
	NOP
	BRA USTEP 
	NOP
UC:	
	CMP CT IMED 2
	NOP
	BRF POST Z
	NOP
	BRA UP
	NOP 
UP2:
	ADD PCR IMED 16 PCR
	BRA POST
	NOP
DOWN:	
	ADD PCR IMED 16 PCR 
	NOP
	NOP
	NOP
	CMP CT IMED 1
	NOP
	BRF DOWN2 Z
	NOP
	SUB PCR IMED 16 PCR
DSTEP:
	BRA DEL
DSTEP.1:
	ADD PCD IMED 16 PCD
	NOP
	NOP
	CMP PCD IMED 0
	NOP
	BRF DC Z
	NOP
	BRA DSTEP 
	NOP
DC: 	
	ADD PCR IMED 16 PCR
	NOP 
	NOP
	NOP
	CMP CT IMED 2
	NOP
	BRF POST Z
	NOP
	BRA DOWN 
	NOP 
DOWN2:
	SUB PCR IMED 16 PCR
	BRA POST
	NOP
LEFT:	
	SUB PCR IMED 1 PCR
	NOP
	NOP
	NOP
	CMP CT IMED 1
	NOP
	BRF LEFT2 Z
	NOP
	MOVE 15 PCD
LSTEP:
	BRA DEL
LSTEP.1:
	SUB PCD IMED 1 PCD
	NOP
	NOP
	CMP PCD IMED 0
	NOP
	BRF LC Z
	NOP
	BRA LSTEP 
	NOP
LC:	
	CMP CT IMED 2
	NOP
	BRF POST Z
	NOP
	BRA LEFT 
	NOP
LEFT2:
	ADD PCR IMED 1 PCR
	BRA POST
	NOP
RIGHT:
	ADD PCR IMED 1 PCR
	NOP
	NOP
	NOP
	CMP CT IMED 1
	NOP
	BRF RIGHT2 Z
	NOP
	SUB PCR IMED 1 PCR
RSTEP:
	BRA DEL
RSTEP.1:
	ADD PCD IMED 1 PCD
	NOP
	NOP
	CMP PCD IMED 16
	NOP
	BRF RC Z
	NOP
	BRA RSTEP 
	NOP
RC:	
	MOVE 0 PCD
	ADD PCR IMED 1 PCR
	NOP
	NOP
	NOP
	CMP CT IMED 2
	NOP
	BRF POST Z
	NOP
	BRA RIGHT
	NOP
RIGHT2:
	SUB PCR IMED 1 PCR
	BRA post
	NOP
POST:
	CMP JOY IMED 0 
	NOP 
	BRF L1 Z 
	NOP 
	BRA POST 
	NOP
DEL:
	MOVE DEL_TIME DEL1
DEL.1:
	MOVE DEL_TIME DEL2
DEL.2:
	MOVE DEL_TIME DEL3
DEL.3:	
	SUB DEL3 IMED 1 DEL3
	NOP
	BRF DEL.3C Z
	NOP 
	BRA DEL.3
	NOP
DEL.3C:
	SUB DEL2 IMED 1 DEL2
	NOP
	BRF DEL.2C Z
	NOP 
	BRA DEL.2
	NOP
DEL.2C: 
	SUB DEL1 IMED 1 DEL1
	NOP 
	BRF DEL.1C Z
	NOP 
	BRA DEL.1
	NOP
DEL.1C:
	CMP DIR IMED 7 
	NOP 
	BRF USTEP.1 Z 
	CMP DIR IMED 6 
	NOP 
	BRF DSTEP.1 Z 
	CMP DIR IMED 5 
	NOP 
	BRF RSTEP.1 Z 
	NOP 
	BRA LSTEP.1
	NOP
